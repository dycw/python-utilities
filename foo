


    @given(data=data())
    @settings(suppress_health_check={HealthCheck.function_scoped_fixture})
    def test_whenever_zoned_datetime(
        self, *, data: DataObject, time_zone_name: TimeZone
    ) -> None:
        time_zone = ZoneInfo(time_zone_name)
        datetime = data.draw(zoned_datetimes_whenever(time_zone=time_zone))
        result = ensure_time_zone(datetime)
        assert result is time_zone


        for delay in [0.2, 0.0]:
            testdir.runpytest().assert_outcomes(failed=1)
            testdir.runpytest().assert_outcomes(skipped=1)
            sleep(0.2)
            testdir.runpytest("--pass").assert_outcomes(passed=1)
            testdir.runpytest().assert_outcomes(skipped=1)
            sleep(delay)
